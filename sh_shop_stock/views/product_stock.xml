<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="sh_website_product_template_stock_form_view_inherit" model="ir.ui.view">
        <field name="name">product.template.stock.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view" />
        <field name="arch" type="xml">
            <field name="categ_id" position="after">
                <field name="prod_templ" invisible="1" />
                <field name="hide_product_stock" attrs="{'invisible':[('prod_templ','=',False)]}" />
                <field name="upc" />
		<field name="case_upc" />
		<field name="case_barcode" />
                <field name="expiry_lot_date" />
                <field name="min_qty" />
		<field name="bilingual_frenchlabel" />
            </field>
        </field>
    </record>
    <!-- <template id="sh_shop_stock_assets_frontend" inherit_id="website.assets_frontend">
        <xpath expr="script[last()]" position="after">
            <script type="text/javascript" src="/sh_shop_stock/static/src/js/shop_variant_stock.js" />
        </xpath>
    </template> -->
    <template id="sh_website_product_variant_stock_inherit" inherit_id="website_sale.product" customize_show="True" name="Stock Alert">
        <xpath expr="//a[@id='add_to_cart']" position="before">
            <span t-if="website.show_stock_notification" id="shop_var_stock">
                <br />
                <div id="variant_stock" style="padding-bottom: 3%;" />
            </span>
        </xpath>
    </template>

    <template id="sh_website_product_outof_stock_inherit" inherit_id="website_sale.products" name="Product OutOf Stock">
        <xpath expr="//div[@id='products_grid']//table//tbody//tr[1]//t//t" position="attributes">
            <attribute name="t-if">(not website.exclude_outof_stock_product) or (td_product['product'].type!='product') or (td_product['product'].type == 'product' and td_product['product'].qty_available &gt; 0)</attribute>
        </xpath>
    </template>

    <template id="sh_website_product_template_stock_inherit" inherit_id="website_sale.products_item" customize_show="True" name="Stock Alert">
        <xpath expr="//div[hasclass('product_price')]" position="inside">
            <span t-if="website and website.show_stock_notification and product and (not product.hide_product_stock)">
                <t t-if="product and product.type=='product' and  int(product.sudo().qty_available - product.sudo().outgoing_qty) &gt; 0 and website and not website.show_only_left_qty_notification">
                    <ol>
                        <li style="font-size:13px;">SKU: <span t-esc="product.sudo().default_code"></span></li>
                        <li style="font-size:13px;">Barcode: <span t-esc="product.sudo().barcode"></span></li>
                        <li style="font-size:13px;">Case Barcode: <t t-foreach="product.sudo().packaging_ids" t-as="package"><span t-esc="package.barcode"></span></t></li>
			<li style="font-size:13px;">Label: <span t-esc="product.sudo().bilingual_frenchlabel"></span></li>
                        <li style="font-size:13px;">Expiry: <t t-if="product.sudo().expiry_lot_date"><span t-esc="product.sudo().expiry_lot_date" ></span></t><t t-else="">N/A</t></li>
                        <!-- <li>Min Qty: <span t-esc="product.sudo().min_qty"></span></li> -->
			<li style="font-size:12px;">
				In Stock
				<t t-if="website.show_product_qty"><span t-esc="int(product.sudo().qty_available - product.sudo().outgoing_qty)" />
				</t>
				<t t-foreach="product.sudo().packaging_ids" t-as="package">
					<t t-if="package.qty != 1">
					    <span style="font-size:12px;"> | Case </span><span style="font-size:12px; text-align: center;" t-esc="round((product.sudo().qty_available - product.sudo().outgoing_qty) / package.qty, 0)"></span>
					</t>
				</t>
			</li>
			<li style="font-size:12px; text-align: center;">
				<t t-foreach="product.sudo().packaging_ids" t-as="package">
					<t t-if="package.qty != 1">
					    <span style="font-size:12px; text-align: center;" >MIN: 
					    <span style="font-size:12px; text-align: center;" t-esc='package.qty' /> | CASE: 
					    <span style="font-size:12px; text-align: center;" t-esc='package.qty' /></span>
					</t>
				</t>
			</li>
                    </ol>
                </t>

                <t t-if="product and product.type=='product' and int(product.sudo().qty_available - product.sudo().outgoing_qty) &gt; 0 and website and website.show_only_left_qty_notification and product.sudo().qty_available &lt;= website.show_left_product_qty">
                    <ol>
                        <li style="font-size:13px;">SKU: <span t-esc="product.sudo().default_code"></span></li>
                        <li style="font-size:13px;">Barcode: <span t-esc="product.sudo().barcode"></span></li>
                        <li style="font-size:13px;">Case Barcode: <t t-foreach="product.sudo().packaging_ids" t-as="package"><span t-esc="package.barcode"></span></t></li>
			<li style="font-size:13px;">Label: <span t-esc="product.sudo().bilingual_frenchlabel"></span></li>
                        <li style="font-size:13px;">Expiry: <t t-if="product.sudo().expiry_lot_date"><span t-esc="product.sudo().expiry_lot_date" ></span></t><t t-else="">N/A</t></li>
                        <!-- <li>Min Qty: <span t-esc="product.sudo().min_qty"></span></li> -->
			<li style="font-size:12px;">
				Only
				<t t-if="website.show_left_product_qty"><span t-esc="int(product.sudo().qty_available - product.sudo().outgoing_qty)" />
				</t>
				<t t-foreach="product.sudo().packaging_ids" t-as="package">
					<t t-if="package.qty != 1">
					    <span style="font-size:12px;"> | Case </span><span style="font-size:12px; text-align: center;" t-esc="round((product.sudo().qty_available - product.sudo().outgoing_qty) / package.qty, 0)"></span>
					</t>
				</t>
			</li>						
			<li style="font-size:14px; text-align: center;">
				<t t-foreach="product.sudo().packaging_ids" t-as="package">
					<t t-if="package.qty != 1">
					    <span style="font-size:14px; text-align: center;" >MIN: 
					    <span style="font-size:14px; text-align: center;" t-esc='package.qty' /> | CASE: 
					    <span style="font-size:14px; text-align: center;" t-esc='package.qty' /></span>
					</t>
				</t>
			</li>
                    </ol> 
                </t>

                <t t-if="product and product.type=='product' and (not int(product.sudo().qty_available - product.sudo().outgoing_qty) &gt; 0)">
			<ol>
                        <li style="font-size:13px;">SKU: <span t-esc="product.sudo().default_code"></span></li>
                        <li style="font-size:13px;">Barcode: <span t-esc="product.sudo().barcode"></span></li>
                        <li style="font-size:13px;">UPC: <span t-esc="product.sudo().upc"></span></li>
			<li style="font-size:13px;">Label: <span t-esc="product.sudo().bilingual_frenchlabel"></span></li>
                        <t t-if="product.sudo().expiry_lot_date"><li style="font-size:13px;">Expiry: <span t-esc="product.sudo().expiry_lot_date" ></span></li></t>
                        <!-- <li>Min Qty: <span t-esc="product.sudo().min_qty"></span></li> -->
<!-- 						<br/> -->
			<b><span style="font-size:14px; text-align: center;">
				<t t-foreach="product.sudo().packaging_ids" t-as="package">
					<t t-if="package.qty != 1">
					    <span style="font-size:14px; text-align: center;" >MIN: 
					    <span style="font-size:14px; text-align: center;" t-esc='package.qty' /> | CASE: 
					    <span style="font-size:14px; text-align: center;" t-esc='package.qty' /></span>
					</t>
				</t>
			</span></b>
                    </ol>
                    <strong class="text text-danger" style="padding: 5px;">Out Of Stock</strong>
			
                </t>
            </span>
        </xpath>
    </template>

    <template id="sh_website_product_template_addcart_inherit" inherit_id="website_sale.products_add_to_cart" name="Product Add to Cart">
        <xpath expr="//t[2]/a" position="attributes">
            <attribute name="t-if">(not website.show_stock_notification) or (product.hide_product_stock) or ( product.type!="product") or ( product.type=="product" and product.qty_available &gt; 0 )</attribute>
            <attribute name="t-if">
                (not website.show_only_left_qty_notification) or (product.hide_product_stock) or ( product.type!="product") or ( product.type=="product" and product.qty_available &gt; 0 and product.qty_available &lt;=
                website.show_left_product_qty )
            </attribute>
        </xpath>
        <xpath expr="//t[2]/a" position="attributes">
            <attribute name="t-if">(not website.show_stock_notification) or (product.hide_product_stock) or ( product.type!="product") or ( product.type=="product" and product.qty_available &gt; 0 )</attribute>
            <attribute name="t-if">
                (not website.show_only_left_qty_notification) or (product.hide_product_stock) or ( product.type!="product") or ( product.type=="product" and product.qty_available &gt; 0 and product.qty_available &lt;=
                website.show_left_product_qty )
            </attribute>
        </xpath>
    </template>
</odoo>
